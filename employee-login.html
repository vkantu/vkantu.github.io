<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employee Login | RK TECHNOLOGIES</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="/logo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

<!-- Navigation -->
<nav class="fade-down navbar dark">

  <div class="nav-left">
    <div class="nav-logo">
      <a href="index.html">
        <img src="/logo.png" alt="RK Technologies Logo">
      </a>
    </div>

    <div class="nav-links">
      <a href="index.html">Home</a>
      <a href="about.html">About Us</a>
      <a href="services.html">Services</a>
      <a href="careers.html">Careers</a>
      <a href="contact.html">Contact Us</a>
    </div>
  </div>

  <div class="nav-right">
    <a href="login.html" class="btn btn-login">
      <i class="fas fa-lock"></i> Login
    </a>
  </div>

</nav>

<!-- Hero -->
<header class="hero">
  <div class="hero-content">
    <h1 class="hero-title">Employee Login</h1>
  </div>
</header>

<!-- Login -->
<section class="fade-up login-section">
  <div class="login-card hover-rise">
    <h2>Sign In</h2>
    <p>Employee access only.</p>

    <form class="login-form" id="employee-login-form">
      <label for="employee-identifier">Email or Username</label>
      <input id="employee-identifier" type="text" placeholder="you@company.com" required autocomplete="username">

      <label for="employee-password">Password</label>
      <input id="employee-password" type="password" placeholder="Enter your password" required autocomplete="current-password">

      <p id="employee-login-message" class="login-message" aria-live="polite"></p>

      <button type="submit" class="btn btn-primary">
        Sign In
      </button>
    </form>
  </div>
</section>

<!-- Footer -->
<footer>
  <p>Â© 2026 RK TECHNOLOGIES INC. All rights reserved.</p>
</footer>

<script src="nav.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
  const SUPABASE_URL = "https://rabqlsxqhjslykytnqay.supabase.co";
  const SUPABASE_ANON_KEY = "sb_publishable_j9qSr64uhVKZgG8jTnjj6g_h2ZygZNp";
  const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const form = document.getElementById("employee-login-form");
  const messageEl = document.getElementById("employee-login-message");

  const setMessage = (text, isError = false) => {
    messageEl.textContent = text;
    messageEl.style.color = isError ? "#c0392b" : "#1b7f3a";
  };

  form.addEventListener("submit", async (event) => {
    event.preventDefault();
    setMessage("");

    const identifier = document.getElementById("employee-identifier").value.trim();
    const password = document.getElementById("employee-password").value;

    if (!identifier || !password) {
      setMessage("Please enter your email and password.", true);
      return;
    }

    const { error } = await supabaseClient.auth.signInWithPassword({
      email: identifier,
      password,
    });

    if (error) {
      setMessage(error.message || "Login failed. Check your credentials.", true);
      return;
    }

    setMessage("Login successful. Redirecting...");
    setTimeout(() => {
      window.location.href = "employee-dashboard.html";
    }, 800);
  });
</script>
</body>
</html>
